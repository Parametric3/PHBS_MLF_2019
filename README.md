# Consumer behavior prediction, based on Taobao data
## Team Member
Name|Student ID|GitHub
---|--|---
Zhang Ping|1901212672|[Parametric3](https://github.com/Parametric3)
Xu Chenqi|1901212653|[XuChenqi](https://github.com/XuChenqi)
Lin Haoru|1901212609|[HalinaLin](https://github.com/HalinaLin)
Luo Chaojing|1901212618|[crystallake27](https://github.com/crystallake27)
## Background
E-commerce has gradually become an essential part of our daily life. In 2019, China's online consumption accounted for more than 25% of total consumption. Under this situation, taking advantage of the big data generated by online transactions, we can analyze and reasonably predict consumer behavior.</p>
Our team obtained Taobao's consumer behavior data from Tianchi, AliCloud, starting from **November 18, 2014** to **December 18, 2014.** Based on that, we derived a series of other features which help interprete the consumer behaviors, and performed corresponding data preprocessing. After that, we comprehensively conducted LR, SVM, Decision Tree, Random Forest. 
## Data
Our data is from Tianchi, AliCloud, starting from November 18, 2014 to December 18, 2014. The original data includ two files. One is about all the users' bahaviors on all the items in that period, inclouding **6 basic indicators**, user id, item id, behavior type (browse, collect, purchase, etc.), user geohash (location), item category and time.</p>
Name|Meaning|Explain
:---:|:---:|:---:
user_id|the unique user identidication|
item_id|the unique item identidication|
behavior_type|the classification of user behavior|browing, collecting, adding into cart and purcahsing, corresponding to 1, 2, 3 and 4 respectively
user_geohash|the location of the user|can be null
item_category|the category of one certain item|
time|time when behaving| precised to hour

For example, **141278390,282725298,1,95jnuqm,5027,2014-11-18 08**.</p>
The other file is about all the items, inclouding **3 basic indicators**, item id, item geohash (location), item category.</p>
Name|Meaning|Explain
:---:|:---:|:---:
item_id|the unique item identidication|
item_geohash|the location of the item|can be numm
item_category|the category of one certain item|

For example, **117151719,96ulbnj,7350**.</p>
For detailed data, see our [data](https://disk.pku.edu.cn:443/link/2B3214E55199700FDB7D21C86F93A9E7) in PKU Cloud.
## Overall Analysis
### Problem Type: Classification
**'Prucahse'** correspodning to **'1'**, and **'Not Purchase'** corresponding to **'0'**</p>
Particularity of the problem:
1. The label is not just for one user or one item, but for one user-item pair **(user, item)**, which influence the selection of training set and test set
2. This is cross-sectional problem. For example, for one user-item pair, its label is derived from the bahevior of 18th, while its features are derived from days before 18th. That is because we can only the past to predict the future.
### Days that really matter
Since we will use the information before 18th to predict the user behavior in 18th, the next question is how many days should be considered. Intuitively, the behavior one month ago definetely has nothing to do with whether the user will buy or not. So this actually a hyperparameter that we should decide first, and then find its best value through fine-tuning. Using $\Delta$ to denote it, and we let $\Delta$ = 2 at first.</p>
### Test Set
Three ways to choose test set:</p>
1. ~~All users and all items:~~
![Test Set Selection 1](https://raw.githubusercontent.com/Parametric3/PHBS_MLF_2019/master/Figs/Test_Set_Selection_1.png)
2. ~~Users who have certain behaviors and the items that users has interactions with in the two days before :~~
![Test Set Selection 2](https://raw.githubusercontent.com/Parametric3/PHBS_MLF_2019/master/Figs/Test_Set_Selection_2.png)
3. For each user who was active before, only condider the items that he has interactions with:
<img style="width:50px;height:50px" src="https://raw.githubusercontent.com/Parametric3/PHBS_MLF_2019/master/Figs/Test_Set_Selection_3.png" align=center />
![Test Set Selection 3](https://raw.githubusercontent.com/Parametric3/PHBS_MLF_2019/master/Figs/Test_Set_Selection_3.png)
### Train Set
The basic rules all the same for train set. Two things to consider:</p>
1. As customary, we set the ratio between the training set and the test set to be 4:1. So since we have choose **(16, 17 | 18)** as the test set (before '|', the features of test set; after '|', the labels of the test set), we need to choose another four group.
2. If we count back from 18th, the abnormal comsumption in 12th, December will distrurb our model greatly, so we need to skip that when choose the train set.

The overall process is shon below, and related data that has been processed is in our [Data](https://github.com/Parametric3/PHBS_MLF_2019/tree/master/Data) folder.
![OveralL Process](https://raw.githubusercontent.com/Parametric3/PHBS_MLF_2019/master/Figs/OveralL_Process.png)
## Feature Generating
All the features can be dicided into two levels:
1. Basic features, which usually involves one indicator in the original file;
2. Interactive features, which involves two or moe original indicators.
And for each feature class, like user features, the features it contains can be divided into three tyoes:
1. Satistic features: Obtained by directly counting the number of certain event.
2. Ratio features: Ratio between two satistic features.
3. Time features: Features that involve time.
## Model Building

## Metrics

## Future Work
